<div id="moteur-recherche">
  <table cellspacing="0"
         cellpadding="4"
         width="100%">
    <tr>
         <td id="moteur-form-cell">
            <div id="moteur-form">
                <form action="" method="post"
                      id="zc.page.browser_form"
                      enctype="multipart/form-data"
                      tal:attributes="action string:${here/absolute_url}/search.html">

                     <label class="label-recherche"
                            i18n:domain="gites"
                            i18n:translate="label_communes">Lieu :</label>
                     <br/>
                     <select name="form.commune">
                        <option value="-1"></option>
                        <tal:requete tal:repeat="commune here/@@moteur_recherche_view/getCommunes">
                           <span>
                              <option tal:attributes="value commune"
                                      i18n:translate=""
                                      tal:content="commune">Commune</option>
                           </span>
                        </tal:requete>
                     </select>
                     <br/>

                     <label class="label-recherche"
                            i18n:domain="gites"
                            i18n:translate="label_tarifs">Tarifs :</label>
                     <br/>
                     <select name="form.tarif">
                        <option value="-1"></option>
                        <tal:requete tal:repeat="tarif here/@@moteur_recherche_view/getTarifs">
                           <span tal:define="cle tarif/pk">
                              <option tal:attributes="value cle">
                                  <span tal:condition="python: tarif['max'] == -1">> </span>
                                  <span tal:replace="tarif/min" />€
                                  <span tal:condition="python: tarif['max'] != -1"> - <span tal:replace="tarif/max" />€</span>
                              </option>
                           </span>
                        </tal:requete>
                     </select>
                     <br/>

                     <label class="label-recherche"
                            i18n:domain="gites"
                            i18n:translate="label_confort">Confort :</label>
                     <br/>
                     <select name="form.classification">
                        <option value="-1"></option>
                        <tal:requete tal:repeat="epis here/@@moteur_recherche_view/getClassification">
                          <option tal:attributes="value epis"
                                  tal:content="epis">
                          </option>
                        </tal:requete>
                     </select>
                     <br/>

                     <label class="label-recherche"
                            i18n:domain="gites"
                            i18n:translate="">Sejour du</label> :
                     <br/>
                     <input id="form.fromDate" 
                            class="textType" 
                            type="text" 
                            value="" 
                            size="10" 
                            name="form.fromDate" />
                     <input id="form.fromDate_trigger"
                            type="button"
                            class="form-button-calendar"
                            value="" />
                     <script type="text/javascript">
                        Calendar.setup({
                        inputField: 'form.fromDate',
                        button: 'form.fromDate_trigger',
                        ifFormat: '%d/%m/%Y'
                        });
                     </script>
                     <br/>

                     <label class="label-recherche"
                            i18n:domain="gites"
                            i18n:translate="">Sejour au</label> :
                     <br/>
                      <input id="form.toDate" 
                             class="textType" 
                             type="text" 
                             value="" 
                             size="10" 
                             name="form.toDate" />
                      <input id="form.toDate_trigger" 
                             type="button"
                             class="form-button-calendar" 
                             value="" />
                      <script type="text/javascript">
                              Calendar.setup({
                              inputField: 'form.toDate',
                              button: 'form.toDate_trigger',
                              ifFormat: '%d/%m/%Y'
                              });
                      </script>
                    <br/>
                    <br/>
                    <input type="hidden"
                           name="form.capacityMin"
                           value="2"/>
                           
                    <div id="form-action-search">
                        <input type="submit"
                               i18n:domain="gites"
                               i18n:attributes="value action_search;"
                               value="Rechercher"
                               id="form.actions.search"
                               name="form.actions.search" />
                    </div>
                </form>
            </div>
            <br />
            <div id="moteur-ref">
                <form action=""
                      tal:attributes="action string:${here/portal_url}/moteur_recherche_view/getHebergementByNameOrPk"
                      method="post">
                  <div id="ref_pk">
                      <label i18n:domain="gites"
                             i18n:translate="label_reference"
                             class="label-recherche">Recherche rapide</label>
                      <div i18n:domain="gites"
                           i18n:translate="encoder_reference"
                           id="texte-ref">
                         Encoder la r&eacute;f&eacute;rence<br />
                         de la chambre d'hôtes</div>
                      <input type="text"
                             name="reference"
                             value=""
                             size="20" />
                      <input type="submit"
                             id="form-button-go"
                             value="GO" />
                  </div>
               </form>
           </div>
         </td>
         <td align="left" valign="top">
            <div id="moteur-carte">
                <a href="hebergement_map"
                   i18n:translate="recherche_cartographique"
                   tal:attributes="href string:${context/absolute_url}/map">
                   <img src=""
                        tal:attributes="src python:'wallonie_%s.png' % request.LANGUAGE"
                        alt="BnB Wallonie"
                        title="BnB Wallonie" />
                </a>
            </div>
         </td>
         <td align="left" valign="top">
             <span tal:replace="structure provider:bnbelgium.portlets" />
         </td>
      </tr>
   </table>
</div>
