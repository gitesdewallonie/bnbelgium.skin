<metal:language define-macro="language"
                tal:condition="context/isTranslatable"
                tal:define="data context/languageSelectorData">
    <ul tal:condition="python:len(data) &gt; 1" id="menu-languageselector">
      <span tal:repeat="lang data">
        <li tal:define="current lang/current;
                        available lang/available;
                        code python:lang.get('Language').upper();
                        currentItem python:test(current, 'currentItem ', '')"
            tal:attributes="src string:${portal_url}/${lang/flag};
                            alt lang/Title;
                            class python:test(not available, '%svisualGhosted language-code' % currentItem, '%slanguage-code' % currentItem)">

            <a href=""
               tal:attributes="href lang/change_url;
                               title lang/alt"
                ><span tal:replace="code">language code</span></a>
        </li>
      </span>
    </ul>
</metal:language>
